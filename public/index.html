<html>
<head>
    <title>Cashflow</title>
    <link rel="stylesheet" type="text/css" href="/resources/css/ext-all.css" />
    <link rel="stylesheet" type="text/css" href="/resources/shared/example.css" />
    <link rel="stylesheet" type="text/css" href="/resources/css/graph.css" />
    <link rel="stylesheet" type="text/css" href="/resources/css/detail.css" />

    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
    <script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/md5.js"></script>
    <script type="text/javascript" src="/resources/bootstrap.js"></script>
    <script type="text/javascript" src="/resources/d3.v2.js"></script>
    <script type="text/javascript" src="/resources/rickshaw.js"></script>

    <script type="text/javascript" src="/resources/js/model/ExpenseItem.js"></script>
    <script type="text/javascript" src="/resources/js/model/ExpenseContentConfiguration.js"></script>
    <script type="text/javascript" src="/resources/js/controller/ExpenseParser.js"></script>
    <script type="text/javascript" src="/resources/js/controller/TagSuggestionController.js"></script>

    <script type="text/javascript" src="/resources/js/view/CashflowInputText.js"></script>
    <script type="text/javascript" src="/resources/js/view/CashflowGrid.js"></script>
    <script type="text/javascript" src="/resources/js/view/window/UploadExpensesWindow.js"></script>
    <script type="text/javascript" src="/resources/js/view/ExpenseGraph.js"></script>
    <script type="text/javascript" src="/resources/js/view/DateRangePicker.js"></script>
    <script type="text/javascript" src="/resources/js/view/ExpenseDataGrid.js"></script>

    <style type="text/css">
        html, body {
        font: normal 12px verdana;
        margin: 0;
        padding: 0;
        border: 0 none;
        }
    </style>

    <script type="text/javascript">


        Ext.onReady(function() {
            var currentName;
            var replace = function(config, name) {
                var btns = Ext.getCmp('btns');
                if (name && name != currentName) {
                    currentName = name;
                    btns.remove(0);
                    btns.add(Ext.apply(config));
                }
            };

            // -----------------------------------------------------------------------
            // Panels
            // -----------------------------------------------------------------------
            var tabs = Ext.create('Ext.tab.Panel', {
                height: 900,
                renderTo: document.body,listeners: {
                    'tabchange': function(tabPanel, tab) {
                        if (tab.id == 'graphTab') {
                        }
                        else if (tab.id == 'dataTab') {
                            expenseDataGrid.load(dateRangePicker.getStartDate(), dateRangePicker.getEndDate());
                        }
                    }
                },

                items: [
                {
                    title: 'Input',
                    region: 'center',
                    layout: 'vbox',
                    VBoxLayout:{
                        margins: '10 10 10 10'
                    },
                    items: [
                        cashflowInput,
                        cashflowGrid,
                        {
                            layout: {
                                type: 'hbox',
                                pack: 'end'
                            },
                            width: 800,
                            align: 'right',
                            border: false,
                            items: [{
                                xtype: 'button',
                                margins: '5 5 5 5',
                                text : 'Send',
                                listeners: {
                                    click: function () {
                                        Ext.create('Cashflow.view.UploadExpensesWindow').show();
                                    }
                                }
                            }, {
                                xtype: 'button',
                                margins: '5 5 5 5',
                                text : 'Parsing Configuration'
                            }]
                        }
                    ]
                },
                {
                    title: 'Persisted Data',
                    region: 'center',
                    layout: 'vbox',
                    id: 'dataTab',
                    VBoxLayout:{
                        margins: '10 10 10 10'
                    },
                    items: [
                        expenseDataGrid
                    ]
                },
                {
                    title: 'Graphs',
                    region: 'center',
                    layout: 'vbox',
                    id: 'graphTab',
                    VBoxLayout:{
                        margins: '10 10 10 10'
                    },
                    items: [
                        dateRangePicker,
                        cashflowChart
                    ]
                }]
            });

        });



    </script>
</head>
<body>
</body>
</html>
